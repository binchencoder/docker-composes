version: "3.8"
services:
#  mysql:
#    image: mysql:8.0
#    container_name: xxl-job-mysql
#    restart: unless-stopped
#    environment:
#      MYSQL_ROOT_PASSWORD: root_password
#      MYSQL_DATABASE: xxl_job
#      MYSQL_USER: xxl_user
#      MYSQL_PASSWORD: xxl_password
#    ports:
#      - "3306:3306"
#    volumes:
#      - ./mysql/data:/var/lib/mysql
#      - ./mysql/init:/docker-entrypoint-initdb.d
 xxl-job-admin:
   image: xuxueli/xxl-job-admin:2.3.0
   container_name: xxl-job-admin
   restart: always
   environment:
     PARAMS: >
      #  --spring.datasource.url=jdbc:mysql://xxl-job-mysql:3306/xxl_job?useUnicode=true&characterEncoding=UTF-8&useSSL=false&serverTimezone=Asia/Shanghai
      #  --spring.datasource.username=xxl_user
      #  --spring.datasource.password=xxl_password

       --spring.datasource.url=jdbc:postgresql://10.1.13.67:5432/xxl_job?useUnicode=true&characterEncoding=UTF-8&useSSL=false&serverTimezone=Asia/Shanghai
       --spring.datasource.username=postgre
       --spring.datasource.password=postgre
       --server.servlet.context-path=/xxl-job-admin
       --xxl.job.accessToken=your_token

       
   ports:
     - "8080:8080"
   depends_on:
     - mysql
   volumes:
     - ./logs:/data/applogs